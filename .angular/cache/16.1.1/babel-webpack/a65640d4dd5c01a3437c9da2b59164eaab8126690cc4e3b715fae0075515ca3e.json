{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nexport let ProductsComponent = class ProductsComponent {\n  constructor(ps, router) {\n    this.ps = ps;\n    this.router = router;\n    this.products = [];\n    this.keyword = \"\";\n    this.totalPages = 0;\n    this.pageSize = 3;\n    this.currentPage = 1;\n  }\n  handleCheckProduct(product) {\n    this.ps.checkProduct(product).subscribe({\n      next: updatedProduct => {\n        product.checked = !product.checked;\n      }\n    });\n  }\n  handleDeleteProduct(product) {\n    if (confirm(\"Etes-vous sure?\")) {\n      this.ps.deleteProduct(product).subscribe({\n        next: value => {\n          this.products = this.products.filter(p => p.id != product.id);\n        }\n      });\n    }\n  }\n  ngOnInit() {\n    this.searchProducts();\n  }\n  searchProducts() {\n    this.ps.searchProducts(this.keyword, this.currentPage, this.pageSize).subscribe({\n      next: resp => {\n        this.products = resp.body;\n        let totalProducts = parseInt(resp.headers.get('x-total-count'));\n        console.log(totalProducts);\n        this.totalPages = Math.floor(totalProducts / this.pageSize);\n        if (totalProducts % this.pageSize != 0) {\n          this.totalPages++;\n        }\n        console.log(this.totalPages);\n      },\n      error: err => {\n        console.log(err);\n      }\n    });\n  }\n  /*searchProducts() {\n    this.currentPage=1;\n    this.totalPages=0;\n    this.ps.getProducts(this.keyword,this.currentPage,this.pageSize).subscribe(\n      {\n        next:data=>{\n          this.products=data;\n        }\n      }\n    )\n  }*/\n  handleGoToPage(page) {\n    this.currentPage = page;\n    this.searchProducts();\n  }\n  handleEditProduct(product) {}\n};\nProductsComponent = __decorate([Component({\n  selector: 'app-products',\n  templateUrl: './products.component.html',\n  styleUrls: ['./products.component.css']\n})], ProductsComponent);","map":{"version":3,"names":["Component","ProductsComponent","constructor","ps","router","products","keyword","totalPages","pageSize","currentPage","handleCheckProduct","product","checkProduct","subscribe","next","updatedProduct","checked","handleDeleteProduct","confirm","deleteProduct","value","filter","p","id","ngOnInit","searchProducts","resp","body","totalProducts","parseInt","headers","get","console","log","Math","floor","error","err","handleGoToPage","page","handleEditProduct","__decorate","selector","templateUrl","styleUrls"],"sources":["C:\\Users\\user\\Desktop\\Master\\Enset\\s8\\JEE\\enset-app\\src\\app\\products\\products.component.ts"],"sourcesContent":["import {Component, OnInit} from '@angular/core';\nimport {HttpClient} from \"@angular/common/http\";\nimport {ProductService} from \"../services/product.service\";\nimport {Product} from \"../model/product.model\";\nimport {Observable} from \"rxjs\";\n\n\n@Component({\n  selector: 'app-products',\n  templateUrl: './products.component.html',\n  styleUrls: ['./products.component.css']\n})\nexport class ProductsComponent implements OnInit{\n\n  products:Array<Product> =[];\n  public keyword:string=\"\";\n  totalPages:number=0;\n  pageSize=3;\n\n  currentPage:number=1;\n  constructor(private ps:ProductService,private router:) {\n\n  }\n  handleCheckProduct(product:Product){\n    this.ps.checkProduct(product).subscribe(\n      {\n        next:updatedProduct=>{\n\n           product.checked = !product.checked;\n\n        }\n      }\n    )\n\n  }\n  handleDeleteProduct(product:Product){\n    if(confirm(\"Etes-vous sure?\")){\n      this.ps.deleteProduct(product).subscribe(\n        {\n          next:value=>{\n            this.products=this.products.filter(p=>p.id!=product.id)\n          }\n        }\n      )\n    }\n\n\n  }\n  ngOnInit(): void {\n    this.searchProducts();\n  }\n  searchProducts(){\n   this.ps.searchProducts(this.keyword,this.currentPage,this.pageSize).subscribe(\n     {\n       next:(resp)=>{\n         this.products=resp.body as Product[];\n         let totalProducts:number =parseInt(resp.headers.get('x-total-count')!);\n         console.log(totalProducts);\n         this.totalPages=Math.floor(totalProducts/this.pageSize);\n\n         if(totalProducts % this.pageSize!=0){\n          this.totalPages++;\n         }\n         console.log(this.totalPages);\n       },\n       error:err => {\n        console.log(err);\n       }\n     }\n   )\n  }\n\n  /*searchProducts() {\n    this.currentPage=1;\n    this.totalPages=0;\n    this.ps.getProducts(this.keyword,this.currentPage,this.pageSize).subscribe(\n      {\n        next:data=>{\n          this.products=data;\n        }\n      }\n    )\n  }*/\n  handleGoToPage(page:number){\n  this.currentPage=page;\n  this.searchProducts()\n  }\n\n  handleEditProduct(product: T) {\n\n  }\n}\n"],"mappings":";AAAA,SAAQA,SAAS,QAAe,eAAe;AAYxC,WAAMC,iBAAiB,GAAvB,MAAMA,iBAAiB;EAQ5BC,YAAoBC,EAAiB,EAASC,MAAO;IAAjC,KAAAD,EAAE,GAAFA,EAAE;IAAwB,KAAAC,MAAM,GAANA,MAAM;IANpD,KAAAC,QAAQ,GAAiB,EAAE;IACpB,KAAAC,OAAO,GAAQ,EAAE;IACxB,KAAAC,UAAU,GAAQ,CAAC;IACnB,KAAAC,QAAQ,GAAC,CAAC;IAEV,KAAAC,WAAW,GAAQ,CAAC;EAGpB;EACAC,kBAAkBA,CAACC,OAAe;IAChC,IAAI,CAACR,EAAE,CAACS,YAAY,CAACD,OAAO,CAAC,CAACE,SAAS,CACrC;MACEC,IAAI,EAACC,cAAc,IAAE;QAElBJ,OAAO,CAACK,OAAO,GAAG,CAACL,OAAO,CAACK,OAAO;MAErC;KACD,CACF;EAEH;EACAC,mBAAmBA,CAACN,OAAe;IACjC,IAAGO,OAAO,CAAC,iBAAiB,CAAC,EAAC;MAC5B,IAAI,CAACf,EAAE,CAACgB,aAAa,CAACR,OAAO,CAAC,CAACE,SAAS,CACtC;QACEC,IAAI,EAACM,KAAK,IAAE;UACV,IAAI,CAACf,QAAQ,GAAC,IAAI,CAACA,QAAQ,CAACgB,MAAM,CAACC,CAAC,IAAEA,CAAC,CAACC,EAAE,IAAEZ,OAAO,CAACY,EAAE,CAAC;QACzD;OACD,CACF;;EAIL;EACAC,QAAQA,CAAA;IACN,IAAI,CAACC,cAAc,EAAE;EACvB;EACAA,cAAcA,CAAA;IACb,IAAI,CAACtB,EAAE,CAACsB,cAAc,CAAC,IAAI,CAACnB,OAAO,EAAC,IAAI,CAACG,WAAW,EAAC,IAAI,CAACD,QAAQ,CAAC,CAACK,SAAS,CAC3E;MACEC,IAAI,EAAEY,IAAI,IAAG;QACX,IAAI,CAACrB,QAAQ,GAACqB,IAAI,CAACC,IAAiB;QACpC,IAAIC,aAAa,GAASC,QAAQ,CAACH,IAAI,CAACI,OAAO,CAACC,GAAG,CAAC,eAAe,CAAE,CAAC;QACtEC,OAAO,CAACC,GAAG,CAACL,aAAa,CAAC;QAC1B,IAAI,CAACrB,UAAU,GAAC2B,IAAI,CAACC,KAAK,CAACP,aAAa,GAAC,IAAI,CAACpB,QAAQ,CAAC;QAEvD,IAAGoB,aAAa,GAAG,IAAI,CAACpB,QAAQ,IAAE,CAAC,EAAC;UACnC,IAAI,CAACD,UAAU,EAAE;;QAElByB,OAAO,CAACC,GAAG,CAAC,IAAI,CAAC1B,UAAU,CAAC;MAC9B,CAAC;MACD6B,KAAK,EAACC,GAAG,IAAG;QACXL,OAAO,CAACC,GAAG,CAACI,GAAG,CAAC;MACjB;KACD,CACF;EACF;EAEA;;;;;;;;;;;EAWAC,cAAcA,CAACC,IAAW;IAC1B,IAAI,CAAC9B,WAAW,GAAC8B,IAAI;IACrB,IAAI,CAACd,cAAc,EAAE;EACrB;EAEAe,iBAAiBA,CAAC7B,OAAU,GAE5B;CACD;AA/EYV,iBAAiB,GAAAwC,UAAA,EAL7BzC,SAAS,CAAC;EACT0C,QAAQ,EAAE,cAAc;EACxBC,WAAW,EAAE,2BAA2B;EACxCC,SAAS,EAAE,CAAC,0BAA0B;CACvC,CAAC,C,EACW3C,iBAAiB,CA+E7B"},"metadata":{},"sourceType":"module","externalDependencies":[]}